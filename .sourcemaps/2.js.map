{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;;GAEG;AACqC;AACP;AACe;AAShD;IAAA;IAA8B,CAAC;IAAlB,cAAc;QAP1B,uEAAQ,CAAC;YACN,YAAY,EAAE,CAAC,uDAAQ,CAAC;YACxB,OAAO,EAAE;gBACL,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aAErC;SACJ,CAAC;OACW,cAAc,CAAI;IAAD,qBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACde;AAEC;AACsC;AAQjF;IAME,kBAAmB,YAAkC;QAAlC,iBAAY,GAAZ,YAAY,CAAsB;QAH9C,eAAU,GAAC,EAAE,CAAC;QACd,WAAM,GAAU,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAGhD,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAEO,4BAAS,GAAjB;QAAA,iBAgBC;QAfC,2DAAS,EAAE;aACV,UAAU,CAAC,OAAO,CAAC;aACnB,GAAG,EAAE;aACL,IAAI,CAAC,UAAC,KAA6B;YAClC,KAAK,CAAC,OAAO,CAAC,UAAC,CAAC;gBACd,EAAE,EAAC,CAAC,CAAC,EAAE,IAAE,KAAI,CAAC,MAAM,CAAC,EAAC;oBACpB,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC;wBACnB,QAAQ,EAAC,CAAC,CAAC,EAAE;wBACb,UAAU,EAAC,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI;wBACxB,WAAW,EAAC,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK;wBAC1B,KAAK,EAAC,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK;qBACrB,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAGM,uBAAI,GAAX;QACE,IAAI,IAAI,GAAC,IAAI,CAAC;QACd,sDAAI,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACpB,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,UAAC,KAAK;gBAC3C,2DAAS,EAAE;qBACV,UAAU,CAAC,OAAO,CAAC;qBACnB,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;oBACtC,KAAK,EAAE,IAAI;iBACZ,CAAC,CAAC,IAAI,CAAC;oBACL,YAAY,CAAC,OAAO,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;gBACnC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IAEL,CAAC;IA3CU,QAAQ;QALpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,WAAW,mGAAa;WACS;SAClC,CAAC;iBAOqD;OAN1C,QAAQ,CA6CpB;IAAD,CAAC;AAAA;SA7CY,QAAQ,e","file":"2.js","sourcesContent":["/**\r\n * Created by hsuanlee on 2017/4/4.\r\n */\r\nimport { NgModule} from '@angular/core';\r\nimport { HomePage} from './home';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n    declarations: [HomePage],\r\n    imports: [\r\n        IonicPageModule.forChild(HomePage),\r\n\r\n    ],\r\n})\r\nexport class HomePageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage } from 'ionic-angular';\r\nimport { auth, firestore } from 'firebase';\r\nimport { NotificationProvider } from '../../providers/notification/notification';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html',\r\n  providers: [NotificationProvider]\r\n})\r\nexport class HomePage {\r\n\r\n  public toUser : {toUserId: string, toUserName: string, toUserToken: string};\r\n  public listToUser=[];\r\n  public userId:string = localStorage.getItem(\"id\");\r\n\r\n  constructor(public notification: NotificationProvider) {\r\n    this.listUsers();\r\n  }\r\n\r\n  private listUsers(){\r\n    firestore()\r\n    .collection(\"users\")\r\n    .get()\r\n    .then((users:firestore.QuerySnapshot)=>{\r\n      users.forEach((r)=>{\r\n        if(r.id!=this.userId){\r\n          this.listToUser.push({\r\n            toUserId:r.id,\r\n            toUserName:r.data().name,\r\n            toUserToken:r.data().token,\r\n            email:r.data().email\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  public exit():void{\r\n    var self=this;\r\n    auth().signOut().then(()=>{\r\n      self.notification.generateToken().then((token)=>{\r\n        firestore()\r\n        .collection(\"users\")\r\n        .doc(localStorage.getItem(\"id\")).update({\r\n          token: null\r\n        }).then(()=>{\r\n           localStorage.setItem(\"id\",null);\r\n        });\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}