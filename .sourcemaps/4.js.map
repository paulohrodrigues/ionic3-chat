{"version":3,"sources":["../../src/pages/auth/auth.module.ts","../../src/pages/auth/auth.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AuthPage } from './auth';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AuthPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AuthPage),\r\n  ],\r\n})\r\nexport class AuthPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/auth.module.ts","import { auth, firestore } from 'firebase';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Alert } from 'ionic-angular';\r\nimport { NotificationProvider } from '../../providers/notification/notification';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-auth',\r\n  templateUrl: 'auth.html',\r\n  providers:[NotificationProvider]\r\n})\r\nexport class AuthPage {\r\n\r\n  public cadastro:boolean = true;\r\n  public data:{nome:string,email:string,password:string}={\r\n    nome:\"\",\r\n    email:\"\",\r\n    password:\"\"\r\n  };\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public notification: NotificationProvider) {}\r\n\r\n  private cadastrar(){\r\n    var self=this;\r\n    auth()\r\n    .createUserWithEmailAndPassword(this.data.email,this.data.password)\r\n    .then((user:auth.UserCredential)=>{\r\n      localStorage.setItem(\"id\",user.user.uid);\r\n      localStorage.setItem(\"name\",this.data.nome);\r\n        self.notification.generateToken().then((token)=>{\r\n        firestore()\r\n        .collection(\"users\")\r\n        .doc(user.user.uid)\r\n        .set({\r\n          name:this.data.nome,\r\n          email:this.data.email,\r\n          token: token\r\n        })\r\n        .then(()=>{  \r\n          alert(\"Cadastrado com Sucesso!\");\r\n        });\r\n      });\r\n    })\r\n    .catch(()=>{\r\n      alert(\"Dados Incorretos!\");\r\n    });\r\n  }\r\n\r\n  private logar(){\r\n    var self=this;\r\n    auth()\r\n    .signInWithEmailAndPassword(this.data.email,this.data.password)\r\n    .then((result:auth.UserCredential)=>{\r\n      localStorage.setItem(\"id\",result.user.uid);\r\n        firestore()\r\n        .collection(\"users\")\r\n        .doc(result.user.uid)\r\n        .get()\r\n        .then((r:firestore.DocumentSnapshot)=>{\r\n          localStorage.setItem(\"name\",r.data().name);\r\n          self.notification.generateToken().then((token)=>{\r\n            firestore()\r\n            .collection(\"users\")\r\n            .doc(result.user.uid).update({\r\n              token: token\r\n            }).then(()=>{\r\n          });\r\n        });\r\n      });\r\n    })\r\n    .catch(()=>{\r\n      alert(\"Dados Incorretos!\");\r\n    });\r\n  }\r\n\r\n  public generate(){\r\n      (this.cadastro==true) ? this.cadastrar() : this.logar();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad AuthPage');\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/auth.ts"],"sourceRoot":""}